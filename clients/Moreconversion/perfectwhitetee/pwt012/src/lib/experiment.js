import { setCookie } from './helpers/utils';
import setup from './services/setup';
import shared from './shared/shared';

const { ID } = shared;

const init = () => {
  setCookie('discount_code', 'buy2Get20PerOff');

  const attachPoint = document.querySelector('.add-to-cart');

  const offerHtml = `<div class='${ID}__offer'>
    <span class='${ID}__offer-icon'>
      <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_1_618)">
        <path d="M12.2813 24.8409H11.7188C11.1497 24.7148 10.6496 24.4528 10.2375 24.0436C9.90613 23.7145 9.60426 23.3555 9.2766 23.0226C8.99348 22.7348 8.70285 22.4512 8.39395 22.1925C8.27066 22.0889 8.0916 22.013 7.93129 21.9989C7.49769 21.9609 7.06082 21.952 6.62535 21.9516C6.1266 21.9516 5.62645 22.0022 5.1291 21.9792C3.9291 21.9234 3.13738 21.2709 2.92785 20.1609C2.85754 19.7897 2.85566 19.4016 2.8566 19.0214C2.85754 18.4537 2.89973 17.8856 2.90348 17.318C2.90629 16.9012 2.78207 16.5192 2.47645 16.2164C2.25004 15.9919 2.02738 15.7617 1.78738 15.5522C1.01582 14.8781 0.224102 14.2219 0.000976562 13.1442V12.5826C0.12707 12.0047 0.399414 11.5022 0.815664 11.0859C1.14051 10.7611 1.49582 10.4662 1.82348 10.1437C2.11691 9.85499 2.40191 9.5564 2.6691 9.24327C2.76379 9.13171 2.83457 8.96858 2.84629 8.82374C2.88191 8.38265 2.89457 7.93921 2.89551 7.49624C2.89645 6.99796 2.84582 6.49874 2.86832 6.00233C2.91941 4.88437 3.5077 4.10765 4.48973 3.85546C4.80332 3.77483 5.1366 3.73921 5.46145 3.7378C6.1477 3.73499 6.83348 3.77718 7.51973 3.78468C7.95566 3.78937 8.34941 3.65671 8.66348 3.33796C8.87113 3.12749 9.07879 2.91608 9.28223 2.7014C9.61504 2.35077 9.92301 1.97437 10.2793 1.64952C11.4029 0.623428 12.6038 0.623897 13.7246 1.64952C14.0799 1.97483 14.3832 2.35687 14.7225 2.70046C15.0118 2.99343 15.3094 3.27983 15.6239 3.54515C15.7411 3.64405 15.9136 3.71577 16.0664 3.72796C16.508 3.76358 16.9529 3.77343 17.3963 3.7739C17.8875 3.77436 18.3802 3.72421 18.87 3.74811C20.0766 3.80624 20.8599 4.4503 21.0732 5.56499C21.1444 5.93624 21.1458 6.32437 21.1449 6.70452C21.1439 7.26468 21.1032 7.82483 21.0961 8.38499C21.0905 8.82983 21.2325 9.22686 21.556 9.54561C21.7669 9.75327 21.975 9.96468 22.1977 10.1587C22.9754 10.837 23.7746 11.497 24.0014 12.5826V13.1442C23.8838 13.6528 23.6682 14.1159 23.311 14.4994C23.0349 14.7956 22.7382 15.0726 22.4447 15.352C22.1574 15.6258 21.8555 15.885 21.5719 16.163C21.2775 16.4517 21.1064 16.8056 21.1018 17.2233C21.0975 17.5889 21.1149 17.9545 21.1139 18.3197C21.1121 18.8948 21.1491 19.4751 21.0863 20.0442C20.9771 21.0361 20.355 21.6867 19.38 21.9028C19.1307 21.9581 18.8705 21.9905 18.6155 21.989C17.9063 21.9848 17.1971 21.9497 16.4874 21.9422C16.0519 21.9375 15.6572 22.0683 15.3427 22.3861C15.1289 22.6017 14.91 22.8131 14.7104 23.0414C14.0307 23.8167 13.3721 24.6178 12.2832 24.8423L12.2813 24.8409ZM6.49785 20.4909C6.49785 20.4736 6.49785 20.4562 6.49785 20.4389C6.88785 20.4389 7.27879 20.43 7.66832 20.4412C8.25051 20.4581 8.80645 20.5917 9.26113 20.9686C9.66098 21.3005 10.0327 21.668 10.4025 22.0345C10.6791 22.3087 10.9186 22.62 11.1985 22.8909C11.821 23.4937 12.1932 23.4951 12.811 22.882C13.1644 22.5309 13.4752 22.1376 13.816 21.7734C14.2875 21.2691 14.7914 20.7966 15.4739 20.5964C16.133 20.4028 16.8113 20.3981 17.4947 20.453C17.9293 20.4876 18.3689 20.4994 18.8044 20.4801C19.3814 20.4553 19.5966 20.2251 19.6379 19.6528C19.6505 19.4742 19.6566 19.2942 19.6486 19.1151C19.6308 18.7026 19.5989 18.2911 19.5788 17.8786C19.5244 16.7639 19.7888 15.7612 20.625 14.9653C20.8055 14.7933 20.9968 14.632 21.1777 14.4609C21.5339 14.1239 21.9104 13.8037 22.2352 13.4381C22.6036 13.0233 22.6069 12.7069 22.2404 12.2944C21.9052 11.9175 21.525 11.5776 21.1463 11.2425C20.4544 10.6294 19.7921 9.98905 19.6688 9.01874C19.5989 8.46702 19.6261 7.90218 19.6154 7.34343C19.6055 6.83858 19.6214 6.33233 19.5914 5.8289C19.5727 5.51296 19.3594 5.32921 19.0444 5.27952C18.9061 5.25796 18.7655 5.22983 18.6268 5.23405C18.1041 5.24905 17.5819 5.27718 17.0597 5.2978C16.0388 5.33858 15.0797 5.1764 14.3082 4.43202C14.0616 4.19437 13.8329 3.93843 13.5943 3.6928C13.2361 3.32436 12.8982 2.93296 12.511 2.5978C12.1514 2.28655 11.8529 2.31186 11.4727 2.60296C11.3124 2.72577 11.1582 2.86124 11.0208 3.0089C10.7297 3.32343 10.4597 3.65812 10.1658 3.9703C9.69848 4.46718 9.20395 4.96124 8.52191 5.12108C7.99645 5.24437 7.44285 5.27015 6.90004 5.28655C6.34785 5.30343 5.79285 5.23358 5.23973 5.24249C4.61629 5.2528 4.3941 5.49562 4.36035 6.1214C4.35145 6.28452 4.34535 6.44905 4.35238 6.61218C4.37066 7.01671 4.39973 7.42077 4.42082 7.8253C4.47988 8.94843 4.2202 9.95999 3.37504 10.7616C3.18848 10.9383 2.99066 11.1037 2.8041 11.2805C2.45348 11.6123 2.0841 11.9287 1.76488 12.2887C1.39879 12.7012 1.39598 13.0237 1.76113 13.433C2.09723 13.8094 2.47691 14.1492 2.85426 14.4858C3.54379 15.1003 4.19629 15.7392 4.33316 16.7105C4.38941 17.1098 4.41285 17.5167 4.41332 17.9203C4.41332 18.4805 4.35566 19.0411 4.36457 19.6008C4.37441 20.2373 4.61582 20.4642 5.25801 20.4881C5.67098 20.5036 6.08488 20.4909 6.49879 20.4909H6.49785Z" fill="black"/>
        <path d="M8.2928 17.3545C7.99842 17.3587 7.68858 17.145 7.56576 16.8497C7.43592 16.537 7.52076 16.2755 7.75373 16.0434C9.08545 14.7164 10.4158 13.388 11.7461 12.0595C12.8945 10.9134 14.0415 9.76592 15.1919 8.62123C15.5486 8.26639 15.9855 8.28561 16.314 8.66201C16.5578 8.94139 16.5625 9.31686 16.3239 9.60045C16.284 9.64826 16.2386 9.69139 16.194 9.73545C13.7537 12.1715 11.313 14.6072 8.87358 17.0437C8.70998 17.2073 8.5403 17.3508 8.29326 17.3545H8.2928Z" fill="black"/>
        <path d="M9.00234 12.1139C7.76672 12.1186 6.75094 11.107 6.75 9.87094C6.74906 8.6325 7.75547 7.62562 8.99672 7.62281C10.2248 7.61953 11.2416 8.62125 11.2491 9.84187C11.257 11.0944 10.2534 12.1097 9.00234 12.1139ZM9.74813 9.8714C9.74953 9.46359 9.41578 9.12515 9.00797 9.12094C8.58938 9.11672 8.24719 9.45844 8.25047 9.8775C8.25375 10.282 8.59688 10.6191 9.00234 10.6162C9.41203 10.6134 9.74672 10.2792 9.74813 9.8714Z" fill="black"/>
        <path d="M15.0109 13.6121C16.2611 13.6205 17.2604 14.6387 17.2487 15.8921C17.2375 17.1118 16.2179 18.1083 14.9879 18.1018C13.7383 18.0952 12.7365 17.0748 12.7501 15.8218C12.7633 14.6007 13.7833 13.6032 15.0109 13.6116V13.6121ZM15.0034 16.6051C15.4094 16.6046 15.7487 16.2652 15.7487 15.8598C15.7487 15.4505 15.4173 15.1149 15.0076 15.1102C14.59 15.1055 14.2459 15.4496 14.2511 15.8668C14.2558 16.2746 14.5937 16.6055 15.0034 16.6051Z" fill="black"/>
        </g>
        <defs>
        <clipPath id="clip0_1_618">
        <rect width="24" height="24" fill="white" transform="translate(0 0.879883)"/>
        </clipPath>
        </defs>
      </svg>
    </span>
    <span class='${ID}__offer-text'>Buy 2 items or more - Get 20% OFF</span>
  </div>`;

  if (!document.querySelector(`.${ID}__offer`)) {
    attachPoint.insertAdjacentHTML('afterend', offerHtml);
  }
};

export default () => {
  setup();

  init(ID);
};
